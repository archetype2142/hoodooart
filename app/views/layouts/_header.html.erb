<nav class="bg-royalblue relative px-4 py-4  shadow-md z-50">
  <div class="container flex justify-between mx-auto">
    <a class="text-3xl font-bold leading-none" href="/">
      <h1 class="text-lg font-semibold text-gray-800"> 
        <%= image_tag 'logo.png', width: '180px' %>
      </h1>
    </a>
    <div class="lg:hidden flex">
      <span class="flex items-center text-white relative mb-2 hover:cursor-pointer">
        <a href="/cart">
          <svg width="40px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve" fill="white">          
            <path fill="white" d="M11.3,86L10,87.3v7.5c0,4.2,0.2,7.8,0.5,8.3c0.7,1.3,3.1,2.4,4.6,2c0.7-0.1,1.8-0.8,2.4-1.4c1-1.1,1.1-1.7,1.2-6l0.2-4.8h9.4h9.4l1.4,3.3c0.7,1.8,8.8,21.7,17.8,44.1c9,22.5,16.7,41.2,17,41.6c0.3,0.5,1.1,1.1,1.7,1.3c0.8,0.3,16.7,0.4,49.7,0.4c47.9-0.1,48.5-0.1,49.4-1.1c1.2-1.3,24.2-59.5,24.1-61.2c-0.1-2.9-1.7-3.6-10.5-4.7c-3-0.4-30.6-4-61.2-8.1c-30.6-4.1-56.3-7.4-57.1-7.4c-2,0-4.1,2.2-4.1,4.1c0,1.8,1.7,3.5,3.7,3.9c0.9,0.1,27.8,3.7,60,8c32.1,4.2,58.5,7.8,58.6,8c0.1,0.1-4.1,11.4-9.6,25.1l-9.8,24.9l-44.3,0.1c-24.4,0-44.3,0-44.3,0c0,0-8.1-20.1-18-44.6C50.3,101.5,43.8,86,43.1,85.4c-0.9-0.7-2.4-0.8-15.7-0.8H12.7L11.3,86z"/>
            <path fill="white" d="M86.2,126c-1.4,0.3-3.4,2.7-3.4,4.1c0,0.6,0.6,1.7,1.3,2.5l1.3,1.3h31.9h31.9l1.1-1.2c2.3-2.2,1.2-5.8-2-6.7C146.7,125.7,88.5,125.5,86.2,126z"/>
            <path fill="white" d="M85.3,143c-2.7,1.3-3.1,4.8-0.7,6.6c1.2,0.9,2,0.9,41.5,0.9h40.3l1.1-1.2c1.6-1.6,1.6-4.3,0-5.8l-1.2-1.1l-39.7-0.1C91.2,142.3,86.6,142.4,85.3,143z"/>
            <path fill="white" d="M85.1,159.6c-2.5,1.3-2.8,4.9-0.6,6.7c1.2,0.9,2,0.9,41,0.9c42.3,0,41.9,0,42.7-2.1c0.7-1.9,0.3-3.8-1.2-5l-1.4-1.2H126C92.6,158.9,86.1,159,85.1,159.6z"/>
            <path fill="white" d="M93.8,189.3c-13.9,4.5-17.7,21.4-7,30.9c9.5,8.4,24.3,5.5,30-5.9c1.6-3.2,1.7-3.8,1.7-7.5c0-4.6-0.7-6.9-3.3-10.6C110.8,189.8,101.6,186.8,93.8,189.3z M104.6,198c3.3,1.7,5.1,4.3,5.4,7.7c0.5,6.2-4,11-10.3,11c-5.8,0-10.4-4.3-10.4-9.9C89.3,199,97.5,194.3,104.6,198z"/><path fill="white" d="M144.4,188.8c-5.1,1.3-10.4,5.7-12.6,10.5c-1.1,2.3-1.2,3.2-1.2,7.5c0,4.4,0.1,5.1,1.3,7.5c7.1,14.1,27.6,14.1,34.6,0c1.3-2.5,1.4-3.1,1.4-7.6c0-4.6-0.1-5.1-1.5-7.9c-1.9-3.8-5.1-6.9-9.2-8.8c-2.5-1.2-3.7-1.4-7-1.6C148,188.5,145.4,188.6,144.4,188.8z M153.3,197.4c4.1,1.8,7,6.5,6.3,10.6c-0.4,3-2.8,6.2-5.5,7.6c-6,3.1-13.3-0.1-15.1-6.6c-1.2-4.2,1.5-9.4,5.8-11.4C147.1,196.5,151,196.4,153.3,197.4z"/>
          </svg>
          <span class="absolute shopping_cart_total md:top-0 top-[26px]" style="left: 30px"> <%= cookies[:cart] %> </span>
        </a>
      </span>
      <span class="flex items-center bg-royalblue text-white px-2 py-2">
        <% if I18n.locale == :en %>
          <%= link_to 'PL', { locale: :pl }, class: 'navbar-item' %>
        <% end %>
        <% if I18n.locale == :pl %>
          <%= link_to 'EN', { locale: :en }, class: 'navbar-item' %>
        <% end %>
      </span>
      <button class="navbar-burger flex items-center text-blue-600 p-3">
        <svg class="block h-4 w-4 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path>
        </svg>
      </button>
    </div>
    <ul class="container hidden top-1/2 transform lg:flex lg:items-center lg:w-auto lg:space-x-6">
      <li>
        <%= link_to root_path, class: 'text-white hover:text-white' do %>
          <span> <%= t('home') %> </span>
        <% end %>
      </li>
      <li>
        <div class="group">
          <a href="/products">
            <span class="cursor-pointer text-white hover:text-white flex items-center" id="prod-dropdown">
              <span> <%= t('products') %> </span>
               <svg class="-mr-1 h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
              </svg>
            </span>
          </a>

          <div class="hidden absolute z-50 flex flex-col bg-gray-100 text-gray-800 shadow-xl w-40" id="prod-body">
            <% Category.all.each do |category| %>
              <%= link_to products_path(q: { categories_title_cont: category.title.downcase }) do %>
                <span class="hover:bg-royalblue my-1 block border-b border-gray-100 py-1 px-4 font-semibold text-gray-500 hover:text-white md:mx-2">
                  <%= category.title %>
                </span>
              <% end %>
            <% end %>
          </div>
        </div>
      </li>
      <li>
        <%= link_to about_path, class: 'text-white hover:text-white' do %>
          <span> <%= t('about_us') %> </span>
        <% end %>
      </li>
      <li>
        <%= link_to contact_path, class: 'text-white hover:text-white' do %>
          <span> <%= t('contact') %> </span>
        <% end %>
      </li>


      <li class="bg-royalblue text-white px-2 py-1">
        <% if I18n.locale == :en %>
          <%= link_to 'PL', { locale: :pl }, class: 'navbar-item' %>
        <% end %>
        <% if I18n.locale == :pl %>
          <%= link_to 'EN', { locale: :en }, class: 'navbar-item' %>
        <% end %>
      </li>

      <li>
        <%= form_with(url: products_path, method: :get, id: 'search_field' ) do |f| %>
          <%= f.text_field 'q[sku_cont]', placeholder: I18n.t('search_field'), class: 'text-black md:text-white' %>
          <%= render(ButtonComponent.new(button_type: :submit, custom_classes: 'md:mt-0')) do %>
            <svg width="20px" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px">
              <path fill="white" d="M 21 3 C 11.654545 3 4 10.654545 4 20 C 4 29.345455 11.654545 37 21 37 C 24.701287 37 28.127393 35.786719 30.927734 33.755859 L 44.085938 46.914062 L 46.914062 44.085938 L 33.875 31.046875 C 36.43682 28.068316 38 24.210207 38 20 C 38 10.654545 30.345455 3 21 3 z M 21 5 C 29.254545 5 36 11.745455 36 20 C 36 28.254545 29.254545 35 21 35 C 12.745455 35 6 28.254545 6 20 C 6 11.745455 12.745455 5 21 5 z"/>
            </svg>
          <% end %>
        <% end %>
      </li>

      <li class="text-white relative">
        <a href="/cart">
          <svg width="40px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 256 256" enable-background="new 0 0 256 256" xml:space="preserve" fill="white">          
            <path fill="white" d="M11.3,86L10,87.3v7.5c0,4.2,0.2,7.8,0.5,8.3c0.7,1.3,3.1,2.4,4.6,2c0.7-0.1,1.8-0.8,2.4-1.4c1-1.1,1.1-1.7,1.2-6l0.2-4.8h9.4h9.4l1.4,3.3c0.7,1.8,8.8,21.7,17.8,44.1c9,22.5,16.7,41.2,17,41.6c0.3,0.5,1.1,1.1,1.7,1.3c0.8,0.3,16.7,0.4,49.7,0.4c47.9-0.1,48.5-0.1,49.4-1.1c1.2-1.3,24.2-59.5,24.1-61.2c-0.1-2.9-1.7-3.6-10.5-4.7c-3-0.4-30.6-4-61.2-8.1c-30.6-4.1-56.3-7.4-57.1-7.4c-2,0-4.1,2.2-4.1,4.1c0,1.8,1.7,3.5,3.7,3.9c0.9,0.1,27.8,3.7,60,8c32.1,4.2,58.5,7.8,58.6,8c0.1,0.1-4.1,11.4-9.6,25.1l-9.8,24.9l-44.3,0.1c-24.4,0-44.3,0-44.3,0c0,0-8.1-20.1-18-44.6C50.3,101.5,43.8,86,43.1,85.4c-0.9-0.7-2.4-0.8-15.7-0.8H12.7L11.3,86z"/>
            <path fill="white" d="M86.2,126c-1.4,0.3-3.4,2.7-3.4,4.1c0,0.6,0.6,1.7,1.3,2.5l1.3,1.3h31.9h31.9l1.1-1.2c2.3-2.2,1.2-5.8-2-6.7C146.7,125.7,88.5,125.5,86.2,126z"/>
            <path fill="white" d="M85.3,143c-2.7,1.3-3.1,4.8-0.7,6.6c1.2,0.9,2,0.9,41.5,0.9h40.3l1.1-1.2c1.6-1.6,1.6-4.3,0-5.8l-1.2-1.1l-39.7-0.1C91.2,142.3,86.6,142.4,85.3,143z"/>
            <path fill="white" d="M85.1,159.6c-2.5,1.3-2.8,4.9-0.6,6.7c1.2,0.9,2,0.9,41,0.9c42.3,0,41.9,0,42.7-2.1c0.7-1.9,0.3-3.8-1.2-5l-1.4-1.2H126C92.6,158.9,86.1,159,85.1,159.6z"/>
            <path fill="white" d="M93.8,189.3c-13.9,4.5-17.7,21.4-7,30.9c9.5,8.4,24.3,5.5,30-5.9c1.6-3.2,1.7-3.8,1.7-7.5c0-4.6-0.7-6.9-3.3-10.6C110.8,189.8,101.6,186.8,93.8,189.3z M104.6,198c3.3,1.7,5.1,4.3,5.4,7.7c0.5,6.2-4,11-10.3,11c-5.8,0-10.4-4.3-10.4-9.9C89.3,199,97.5,194.3,104.6,198z"/><path fill="white" d="M144.4,188.8c-5.1,1.3-10.4,5.7-12.6,10.5c-1.1,2.3-1.2,3.2-1.2,7.5c0,4.4,0.1,5.1,1.3,7.5c7.1,14.1,27.6,14.1,34.6,0c1.3-2.5,1.4-3.1,1.4-7.6c0-4.6-0.1-5.1-1.5-7.9c-1.9-3.8-5.1-6.9-9.2-8.8c-2.5-1.2-3.7-1.4-7-1.6C148,188.5,145.4,188.6,144.4,188.8z M153.3,197.4c4.1,1.8,7,6.5,6.3,10.6c-0.4,3-2.8,6.2-5.5,7.6c-6,3.1-13.3-0.1-15.1-6.6c-1.2-4.2,1.5-9.4,5.8-11.4C147.1,196.5,151,196.4,153.3,197.4z"/>
          </svg>
          <span class="absolute shopping_cart_total hover:cursor-pointer cursor-pointer md:top-0 top-[26px]" style="top: 0px; left: 30px"> <%= cookies[:cart] %> </span>
        </a>
      </li>
    </ul>
  </div>
</nav>

<div class="navbar-menu relative z-50 hidden">
  <div class="navbar-backdrop fixed inset-0 bg-gray-800 opacity-25"></div>
  <nav class="fixed top-0 left-0 bottom-0 flex flex-col w-5/6 max-w-sm py-6 px-6 bg-white border-r overflow-y-auto">
    <div class="flex items-center mb-8">
      <a class="mr-auto text-3xl font-bold leading-none" href="#">
        <h1 class="text-lg font-semibold text-gray-800"> Hoodooart </h1>
      </a>
      <button class="navbar-close">
        <svg class="h-6 w-6 text-gray-400 cursor-pointer hover:text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <div>
      <ul>
        <li>
          <%= form_with(url: products_path, method: :get, id: 'search_field' ) do |f| %>
            <%= f.text_field 'q[sku_cont]', placeholder: I18n.t('search_field') %>
            <%= render(ButtonComponent.new(button_type: :submit, custom_classes: 'md:mt-0')) do %>
              <svg width="20px" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px">
                <path fill="white" d="M 21 3 C 11.654545 3 4 10.654545 4 20 C 4 29.345455 11.654545 37 21 37 C 24.701287 37 28.127393 35.786719 30.927734 33.755859 L 44.085938 46.914062 L 46.914062 44.085938 L 33.875 31.046875 C 36.43682 28.068316 38 24.210207 38 20 C 38 10.654545 30.345455 3 21 3 z M 21 5 C 29.254545 5 36 11.745455 36 20 C 36 28.254545 29.254545 35 21 35 C 12.745455 35 6 28.254545 6 20 C 6 11.745455 12.745455 5 21 5 z"/>
              </svg>
            <% end %>
          <% end %>
        </li>

        <li class="mb-3">
          <%= link_to root_path, class: 'text-gray-700 hover:text-gray-900' do %>
            <span> <%= t('home') %> </span>
          <% end %>
        </li>
        <li class="mb-3">
          <%= link_to products_path, class: 'text-gray-700 hover:text-gray-900' do %>
            <span> <%= t('products') %> </span>
          <% end %>
        </li>
        <li class="mb-3">
          <%= link_to about_path, class: 'text-gray-700 hover:text-gray-900' do %>
            <span> <%= t('about_us') %> </span>
          <% end %>
        </li>
        <li class="mb-3">
          <%= link_to contact_path, class: 'text-gray-700 hover:text-gray-900' do %>
            <span> <%= t('contact') %> </span>
          <% end %>
        </li>
      </ul>
    </div>
    <div class="mt-auto">
      <p class="my-4 text-xs text-center text-gray-400">
        <span>&copy; 2024 Hoodooart. All rights reserved.</span>
      </p>
    </div>
  </nav>
</div>

<script>
  var burger = document.querySelector('.navbar-burger');
  var menu = document.querySelector('.navbar-menu');

  burger.addEventListener('click', function() { menu.classList.toggle('hidden'); });

  var close = document.querySelector('.navbar-close');
  var backdrop = document.querySelector('.navbar-backdrop');

  close.addEventListener('click', function() { menu.classList.toggle('hidden'); });
  backdrop.addEventListener('click', function() { menu.classList.toggle('hidden'); });

  const getCookieValue = (name) => (
    document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)')?.pop() || ''
  )

  document.querySelectorAll('.shopping_cart_total').forEach(e => { e.innerHTML = getCookieValue('cart') })
</script>

<style>
  #search_field {
    display: flex;
    gap: 5px;
  }
  #search_field input {
    padding: 1rem 0;
    font-size: 11px;
    height: 2rem;
    width: 130px;
    text-transform: uppercase;
    background: transparent;
    font-weight: 400;
    border-bottom: 1px solid white;
  }

  #search_field input:focus {
    outline: none;
  }

  #search_field input:after {
    content: "";
    z-index: 1;
    position: absolute;
    top: auto;
    right: 0;
    bottom: 0;
    left: 0;
    border-bottom: 1px solid #a7a7a7;

  #search_field button {
    margin-top: 0px !!important;
  }

</style>